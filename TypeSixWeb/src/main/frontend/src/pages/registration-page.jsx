import {useLocation, useNavigate} from "react-router-dom";
import {Box, Button, Card, CardContent, TextField, Typography} from "@mui/material";
import {useEffect, useState} from "react";
import {LOGIN_PAGE} from "../store/constants";
import {useDispatch, useSelector} from "react-redux";
import {sendCode, sendEmail, sendPassword, clearErrors} from "../store/slices/registration-slice";
import { useTranslation } from 'react-i18next';

const EMAIL_STAGE = "email_stage"
const CODE_STAGE = "code_stage"
const PASSWORD_STAGE = "password_stage"
const SUCCESS_STAGE = "success_stage"

export default function RegistrationPage() {
    const navigate = useNavigate()
    const dispatch = useDispatch()

    const [email, setEmail] = useState("")
    const [code, setCode] = useState("")
    const [password, setPassword] = useState("")
    const [stage, setStage] = useState(EMAIL_STAGE)

    const location = useLocation()

    const emailError = useSelector((state) => state.registrationData.emailError)
    const codeError = useSelector((state) => state.registrationData.codeError)
    const passwordError = useSelector((state) => state.registrationData.passwordError)

		const { t, i18n } = useTranslation()

    useEffect(() => {
        dispatch(clearErrors())
        setStage(EMAIL_STAGE)
    }, [location]);

    if (emailError !== undefined && stage !== EMAIL_STAGE) {
			setStage(EMAIL_STAGE)
    }
    if (codeError !== undefined && stage !== CODE_STAGE) {
			setStage(CODE_STAGE)
    }
    if (passwordError !== undefined && stage !== PASSWORD_STAGE) {
			setStage(PASSWORD_STAGE)
    }

		const [inpPassHide, setInpPassHide] = useState(true);

    return <div className="wrapper-def">
        <div className="sec-reg">
            <div className="sec-reg__content">
							{ stage === EMAIL_STAGE ? <>
                <div className="steps-stat sec-reg__stat">
                    <div className="steps-stat__el active">1</div>
                    <div className="steps-stat__el">2</div>
                    <div className="steps-stat__el">3</div>
                    <div className="steps-stat__el"><svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.67905 12C5.57787 12 5.47668 11.952 5.42609 11.9041L0.113834 6.91708C-0.0379447 6.77323 -0.0379447 6.53347 0.113834 6.38961L2.08696 4.56743C2.13755 4.47153 2.23874 4.47153 2.33992 4.47153C2.44111 4.47153 2.4917 4.47153 2.59289 4.56743L5.62846 7.49251L13.4198 0.107892C13.5715 -0.035964 13.8245 -0.035964 13.9763 0.107892L15.8988 1.97802C16 2.02597 16 2.12188 16 2.21778C16 2.26573 16 2.36164 15.8988 2.45754L5.93202 11.9041C5.83083 11.952 5.78024 12 5.67905 12Z" fill="white"/></svg></div>
                </div>
								<div className="sec-reg__form form-reg">
									<div className="form-reg__top">
										<div className="form-reg__title title-def">{t('regTitle')}</div>
										<div className="form-reg__text text-info">{t('regText')}</div>
									</div>
									<div className="form-reg__el form-el">
											<div className="form-el__wrap">
													<input onChange={(event) => setEmail(event.target.value)} placeholder={t('inpEmail')} type='text' className="form-el__inp inp-def" required />
													<svg className="form-el__icon" width="16" height="13" viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.4 13C1.76348 13 1.15303 12.7432 0.702944 12.2861C0.252856 11.829 0 11.209 0 10.5625V2.4375C0 1.79103 0.252856 1.17105 0.702944 0.713927C1.15303 0.256807 1.76348 0 2.4 0H13.6C14.2365 0 14.847 0.256807 15.2971 0.713927C15.7471 1.17105 16 1.79103 16 2.4375V10.5625C16 11.209 15.7471 11.829 15.2971 12.2861C14.847 12.7432 14.2365 13 13.6 13H2.4ZM4.5 3.42875C4.41851 3.35808 4.32386 3.30475 4.22169 3.27194C4.11952 3.23913 4.01189 3.2275 3.90521 3.23774C3.79852 3.24799 3.69495 3.27989 3.60064 3.33157C3.50633 3.38325 3.42321 3.45364 3.3562 3.53858C3.28919 3.62351 3.23967 3.72125 3.21057 3.82599C3.18147 3.93074 3.17338 4.04035 3.1868 4.14833C3.20021 4.25631 3.23484 4.36045 3.28865 4.45457C3.34245 4.5487 3.41432 4.63088 3.5 4.69625L6.5 7.13456C6.92567 7.4807 7.45471 7.66929 8 7.66929C8.54529 7.66929 9.07433 7.4807 9.5 7.13456L12.5 4.69706C12.582 4.63038 12.6504 4.54793 12.701 4.45443C12.7517 4.36093 12.7838 4.2582 12.7954 4.15213C12.8069 4.04605 12.7978 3.93869 12.7686 3.83618C12.7393 3.73367 12.6905 3.63802 12.6248 3.55469C12.5591 3.47136 12.478 3.40197 12.3859 3.35051C12.2938 3.29904 12.1927 3.26649 12.0882 3.25472C11.9838 3.24295 11.8781 3.25219 11.7772 3.28191C11.6762 3.31163 11.582 3.36125 11.5 3.42794L8.5 5.86544C8.35811 5.98082 8.18176 6.04368 8 6.04368C7.81824 6.04368 7.64189 5.98082 7.5 5.86544L4.5 3.42875Z" fill="#9DA7B4"/></svg>
											</div>
											{emailError && (
												<div className="form-el__message"><svg width="9" height="9" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 0.9C3.54522 0.9 2.62955 1.27928 1.95442 1.95442C1.27928 2.62955 0.9 3.54522 0.9 4.5C0.9 5.45478 1.27928 6.37045 1.95442 7.04558C2.62955 7.72072 3.54522 8.1 4.5 8.1C5.45478 8.1 6.37045 7.72072 7.04558 7.04558C7.72072 6.37045 8.1 5.45478 8.1 4.5C8.1 3.54522 7.72072 2.62955 7.04558 1.95442C6.37045 1.27928 5.45478 0.9 4.5 0.9ZM0 4.5C0 2.01465 2.01465 0 4.5 0C6.98535 0 9 2.01465 9 4.5C9 6.98535 6.98535 9 4.5 9C2.01465 9 0 6.98535 0 4.5ZM4.5 2.25C4.61935 2.25 4.73381 2.29741 4.8182 2.3818C4.90259 2.46619 4.95 2.58065 4.95 2.7V4.95C4.95 5.06935 4.90259 5.18381 4.8182 5.2682C4.73381 5.35259 4.61935 5.4 4.5 5.4C4.38065 5.4 4.26619 5.35259 4.1818 5.2682C4.09741 5.18381 4.05 5.06935 4.05 4.95V2.7C4.05 2.58065 4.09741 2.46619 4.1818 2.3818C4.26619 2.29741 4.38065 2.25 4.5 2.25ZM4.5 5.85C4.38065 5.85 4.26619 5.89741 4.1818 5.9818C4.09741 6.06619 4.05 6.18065 4.05 6.3C4.05 6.41935 4.09741 6.53381 4.1818 6.6182C4.26619 6.70259 4.38065 6.75 4.5 6.75H4.5045C4.62385 6.75 4.73831 6.70259 4.8227 6.6182C4.90709 6.53381 4.9545 6.41935 4.9545 6.3C4.9545 6.18065 4.90709 6.06619 4.8227 5.9818C4.73831 5.89741 4.62385 5.85 4.5045 5.85H4.5Z" fill="#E40000"/></svg> {emailError}</div>
											)}
									</div>
									<div className="form-reg__btns">
										<button className="form-reg__next btn-def-2" onClick={() => {
                        // dispatch(sendEmail({email}))
                        setStage(CODE_STAGE)
                    }}><span>{t('next')}</span></button>
										<button onClick={() => navigate(LOGIN_PAGE)} className="form-reg__back btn-def"><span>{t('backText')}</span></button>
									</div>
								</div>
							</>:undefined}
							{ stage === CODE_STAGE ? <>
                <div className="steps-stat sec-reg__stat">
                    <div className="steps-stat__el active">1</div>
                    <div className="steps-stat__el active">2</div>
                    <div className="steps-stat__el">3</div>
                    <div className="steps-stat__el"><svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.67905 12C5.57787 12 5.47668 11.952 5.42609 11.9041L0.113834 6.91708C-0.0379447 6.77323 -0.0379447 6.53347 0.113834 6.38961L2.08696 4.56743C2.13755 4.47153 2.23874 4.47153 2.33992 4.47153C2.44111 4.47153 2.4917 4.47153 2.59289 4.56743L5.62846 7.49251L13.4198 0.107892C13.5715 -0.035964 13.8245 -0.035964 13.9763 0.107892L15.8988 1.97802C16 2.02597 16 2.12188 16 2.21778C16 2.26573 16 2.36164 15.8988 2.45754L5.93202 11.9041C5.83083 11.952 5.78024 12 5.67905 12Z" fill="white"/></svg></div>
                </div>
								<div className="sec-reg__form form-reg">
									<div className="form-reg__top">
										<div className="form-reg__title title-def">{t('regTitle')}</div>
									</div>
									<div className="form-reg__el form-el">
											<div className="form-el__wrap">
													<input placeholder={t('inpCode')} type='text' className="form-el__inp inp-def" required />
													<svg className="form-el__icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.8 5.59933C4.80021 4.44233 5.15874 3.3138 5.8263 2.36885C6.49387 1.4239 7.4377 0.708909 8.52806 0.322156C9.61843 -0.0645967 10.8018 -0.104128 11.9156 0.208996C13.0293 0.522119 14.0187 1.17253 14.7479 2.07082C15.477 2.96912 15.91 4.07121 15.9874 5.22561C16.0649 6.38001 15.7829 7.53005 15.1802 8.51767C14.5776 9.50529 13.6838 10.282 12.6219 10.7411C11.5599 11.2001 10.3818 11.319 9.2496 11.0813L8 12.331C7.70001 12.6311 7.29311 12.7997 6.8688 12.7998H6.4C6.4 13.2242 6.23143 13.6312 5.93137 13.9312C5.63131 14.2313 5.22435 14.3999 4.8 14.3999C4.8 14.8243 4.63143 15.2313 4.33137 15.5313C4.03131 15.8314 3.62435 16 3.2 16H1.6C1.17565 16 0.768687 15.8314 0.468629 15.5313C0.168571 15.2313 0 14.8243 0 14.3999V12.331C9.06198e-05 11.9066 0.168721 11.4997 0.4688 11.1997L4.9184 6.7498C4.83948 6.3714 4.79981 5.98587 4.8 5.59933ZM10.4 3.19917C10.1878 3.19917 9.98434 3.28346 9.83431 3.4335C9.68428 3.58354 9.6 3.78704 9.6 3.99922C9.6 4.21141 9.68428 4.41491 9.83431 4.56495C9.98434 4.71498 10.1878 4.79928 10.4 4.79928C10.6122 4.79928 10.8157 4.88357 10.9657 5.03361C11.1157 5.18364 11.2 5.38714 11.2 5.59933C11.2 5.81151 11.2843 6.01501 11.4343 6.16505C11.5843 6.31509 11.7878 6.39938 12 6.39938C12.2122 6.39938 12.4157 6.31509 12.5657 6.16505C12.7157 6.01501 12.8 5.81151 12.8 5.59933C12.8 4.96277 12.5471 4.35228 12.0971 3.90216C11.647 3.45204 11.0365 3.19917 10.4 3.19917Z" fill="#9DA7B4"/></svg>
											</div>
											{codeError && (
												<div className="form-el__message"><svg width="9" height="9" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 0.9C3.54522 0.9 2.62955 1.27928 1.95442 1.95442C1.27928 2.62955 0.9 3.54522 0.9 4.5C0.9 5.45478 1.27928 6.37045 1.95442 7.04558C2.62955 7.72072 3.54522 8.1 4.5 8.1C5.45478 8.1 6.37045 7.72072 7.04558 7.04558C7.72072 6.37045 8.1 5.45478 8.1 4.5C8.1 3.54522 7.72072 2.62955 7.04558 1.95442C6.37045 1.27928 5.45478 0.9 4.5 0.9ZM0 4.5C0 2.01465 2.01465 0 4.5 0C6.98535 0 9 2.01465 9 4.5C9 6.98535 6.98535 9 4.5 9C2.01465 9 0 6.98535 0 4.5ZM4.5 2.25C4.61935 2.25 4.73381 2.29741 4.8182 2.3818C4.90259 2.46619 4.95 2.58065 4.95 2.7V4.95C4.95 5.06935 4.90259 5.18381 4.8182 5.2682C4.73381 5.35259 4.61935 5.4 4.5 5.4C4.38065 5.4 4.26619 5.35259 4.1818 5.2682C4.09741 5.18381 4.05 5.06935 4.05 4.95V2.7C4.05 2.58065 4.09741 2.46619 4.1818 2.3818C4.26619 2.29741 4.38065 2.25 4.5 2.25ZM4.5 5.85C4.38065 5.85 4.26619 5.89741 4.1818 5.9818C4.09741 6.06619 4.05 6.18065 4.05 6.3C4.05 6.41935 4.09741 6.53381 4.1818 6.6182C4.26619 6.70259 4.38065 6.75 4.5 6.75H4.5045C4.62385 6.75 4.73831 6.70259 4.8227 6.6182C4.90709 6.53381 4.9545 6.41935 4.9545 6.3C4.9545 6.18065 4.90709 6.06619 4.8227 5.9818C4.73831 5.89741 4.62385 5.85 4.5045 5.85H4.5Z" fill="#E40000"/></svg> {codeError}</div>
											)}
									</div>
									<div className="form-reg__btns">
										<button className="form-reg__next btn-def-2" onClick={() => {
                        // dispatch(sendCode({email, code}))
                        setStage(PASSWORD_STAGE)
                    }}><span>{t('next')}</span></button>
										<button onClick={() => navigate(LOGIN_PAGE)} className="form-reg__back btn-def"><span>{t('backText')}</span></button>
									</div>
								</div>
							</>:undefined}
							{ stage === PASSWORD_STAGE ? <>
                <div className="steps-stat sec-reg__stat">
                    <div className="steps-stat__el active">1</div>
                    <div className="steps-stat__el active">2</div>
                    <div className="steps-stat__el active">3</div>
                    <div className="steps-stat__el"><svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.67905 12C5.57787 12 5.47668 11.952 5.42609 11.9041L0.113834 6.91708C-0.0379447 6.77323 -0.0379447 6.53347 0.113834 6.38961L2.08696 4.56743C2.13755 4.47153 2.23874 4.47153 2.33992 4.47153C2.44111 4.47153 2.4917 4.47153 2.59289 4.56743L5.62846 7.49251L13.4198 0.107892C13.5715 -0.035964 13.8245 -0.035964 13.9763 0.107892L15.8988 1.97802C16 2.02597 16 2.12188 16 2.21778C16 2.26573 16 2.36164 15.8988 2.45754L5.93202 11.9041C5.83083 11.952 5.78024 12 5.67905 12Z" fill="white"/></svg></div>
                </div>
								<div className="sec-reg__form form-reg">
									<div className="form-reg__top">
										<div className="form-reg__title title-def">{t('regTitle')}</div>
									</div>
									<div className="form-el form-reg__el">
										<div className="form-el__wrap">
											<input name="password" placeholder={t('inpPass')} type={inpPassHide?'password':'text'} className="form-el__inp inp-def" required />
											<svg className="form-el__icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.8 5.59933C4.80021 4.44233 5.15874 3.3138 5.8263 2.36885C6.49387 1.4239 7.4377 0.708909 8.52806 0.322156C9.61843 -0.0645967 10.8018 -0.104128 11.9156 0.208996C13.0293 0.522119 14.0187 1.17253 14.7479 2.07082C15.477 2.96912 15.91 4.07121 15.9874 5.22561C16.0649 6.38001 15.7829 7.53005 15.1802 8.51767C14.5776 9.50529 13.6838 10.282 12.6219 10.7411C11.5599 11.2001 10.3818 11.319 9.2496 11.0813L8 12.331C7.70001 12.6311 7.29311 12.7997 6.8688 12.7998H6.4C6.4 13.2242 6.23143 13.6312 5.93137 13.9312C5.63131 14.2313 5.22435 14.3999 4.8 14.3999C4.8 14.8243 4.63143 15.2313 4.33137 15.5313C4.03131 15.8314 3.62435 16 3.2 16H1.6C1.17565 16 0.768687 15.8314 0.468629 15.5313C0.168571 15.2313 0 14.8243 0 14.3999V12.331C9.06198e-05 11.9066 0.168721 11.4997 0.4688 11.1997L4.9184 6.7498C4.83948 6.3714 4.79981 5.98587 4.8 5.59933ZM10.4 3.19917C10.1878 3.19917 9.98434 3.28346 9.83431 3.4335C9.68428 3.58354 9.6 3.78704 9.6 3.99922C9.6 4.21141 9.68428 4.41491 9.83431 4.56495C9.98434 4.71498 10.1878 4.79928 10.4 4.79928C10.6122 4.79928 10.8157 4.88357 10.9657 5.03361C11.1157 5.18364 11.2 5.38714 11.2 5.59933C11.2 5.81151 11.2843 6.01501 11.4343 6.16505C11.5843 6.31509 11.7878 6.39938 12 6.39938C12.2122 6.39938 12.4157 6.31509 12.5657 6.16505C12.7157 6.01501 12.8 5.81151 12.8 5.59933C12.8 4.96277 12.5471 4.35228 12.0971 3.90216C11.647 3.45204 11.0365 3.19917 10.4 3.19917Z" fill="#9DA7B4"/></svg>
											<div className={`form-el__btn-pass ${!inpPassHide ? 'active' : ''}`} onClick={() => setInpPassHide(!inpPassHide)}>
												{inpPassHide && (
														<svg width="21" height="19" viewBox="0 0 21 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.55193 0.267004C2.37117 0.0937412 2.12907 -0.0021312 1.87778 3.59567e-05C1.62648 0.00220312 1.3861 0.102237 1.2084 0.278591C1.0307 0.454945 0.929904 0.69351 0.92772 0.942904C0.925537 1.1923 1.02214 1.43256 1.19672 1.61196L18.4483 18.733C18.6291 18.9063 18.8712 19.0021 19.1225 19C19.3738 18.9978 19.6142 18.8978 19.7919 18.7214C19.9696 18.5451 20.0704 18.3065 20.0725 18.0571C20.0747 17.8077 19.9781 17.5674 19.8035 17.388L17.141 14.7457C19.355 12.9803 20.5367 10.7641 20.8616 10.0973C20.9527 9.91134 21 9.70726 21 9.50048C21 9.29369 20.9527 9.08961 20.8616 8.90362C20.1333 7.44801 19.161 6.12578 17.9864 4.99336C16.3082 3.39064 13.8383 1.89065 10.5001 1.89065C8.53633 1.89065 6.8658 2.41094 5.47896 3.17187L2.55193 0.267004ZM8.55262 6.22227C9.28483 5.79331 10.14 5.61809 10.9835 5.72419C11.827 5.83029 12.6111 6.21168 13.2123 6.80836C13.8135 7.40505 14.1978 8.18316 14.3047 9.0203C14.4116 9.85744 14.2351 10.7061 13.8029 11.4328L15.7762 13.3912C17.5551 12.0311 18.6113 10.2752 19.0186 9.5C18.4011 8.33852 17.6039 7.28033 16.6561 6.364C15.2252 4.99622 13.2077 3.79299 10.5001 3.79299C9.25633 3.78681 8.02692 4.05722 6.90222 4.58436L8.55262 6.22227ZM12.3518 9.99271C12.439 9.67007 12.4391 9.33033 12.3521 9.00765C12.265 8.68497 12.0939 8.39073 11.8559 8.15452C11.6179 7.91832 11.3214 7.74847 10.9962 7.66208C10.6711 7.57568 10.3288 7.57577 10.0037 7.66234L12.3518 9.99271ZM3.45573 5.84846C3.55139 5.92965 3.63 6.02874 3.68707 6.14008C3.74414 6.25142 3.77855 6.37283 3.78834 6.49737C3.79813 6.62191 3.7831 6.74714 3.74412 6.86591C3.70514 6.98469 3.64297 7.09468 3.56115 7.18961C2.95047 7.89962 2.42076 8.67445 1.98167 9.5C2.59912 10.6615 3.39631 11.7197 4.34419 12.636C5.77511 14.0038 7.79259 15.207 10.5001 15.207C11.1135 15.207 11.6867 15.1461 12.2253 15.0358C12.4744 14.9853 12.7335 15.0352 12.9456 15.1743C13.1577 15.3134 13.3054 15.5305 13.3562 15.7777C13.4071 16.0249 13.3569 16.2821 13.2167 16.4926C13.0765 16.703 12.8578 16.8496 12.6087 16.9001C11.9464 17.0352 11.2429 17.1094 10.5001 17.1094C7.16195 17.1094 4.69209 15.6094 3.01485 14.0066C1.84001 12.8745 0.867434 11.5526 0.138626 10.0973C0.0473991 9.91088 0 9.70632 0 9.49905C0 9.29178 0.0473991 9.08721 0.138626 8.90076C0.371523 8.42518 1.00792 7.22671 2.10339 5.95404C2.18513 5.85904 2.28493 5.78094 2.39708 5.72422C2.50924 5.6675 2.63155 5.63326 2.75704 5.62345C2.88253 5.61365 3.00874 5.62847 3.12846 5.66708C3.24818 5.70569 3.36001 5.76732 3.45573 5.84846Z" fill="#9DA7B4"/></svg>
												)}
												{!inpPassHide && (
														<svg width="21" height="15" viewBox="0 0 21 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34403 10.5909C3.39617 9.68778 2.59897 8.64479 1.98152 7.5C2.59897 6.35521 3.39617 5.31222 4.34403 4.40906C5.77496 3.06094 7.79245 1.875 10.5 1.875C13.2076 1.875 15.225 3.06094 16.656 4.40906C17.6038 5.31222 18.401 6.35521 19.0185 7.5C18.401 8.6448 17.6038 9.68779 16.656 10.5909C15.225 11.9391 13.2076 13.125 10.5 13.125C7.79245 13.125 5.77496 11.9391 4.34403 10.5909ZM10.5 0C7.1618 0 4.69194 1.47844 3.0147 3.05813C1.83983 4.17394 0.867258 5.47684 0.138463 6.91125C0.0473463 7.09455 0 7.29571 0 7.49953C0 7.70335 0.0473463 7.90451 0.138463 8.08781C0.866876 9.52248 1.83913 10.8257 3.01374 11.9419C4.69194 13.5216 7.16276 15 10.5 15C13.8382 15 16.3081 13.5216 17.9853 11.9419C19.1602 10.8261 20.1328 9.52318 20.8615 8.08875C20.9527 7.90545 21 7.70429 21 7.50047C21 7.29665 20.9527 7.09549 20.8615 6.91219C20.1332 5.4775 19.1609 4.17427 17.9863 3.05813C16.3081 1.47844 13.8382 0 10.5 0ZM8.58315 7.5C8.58315 7.00272 8.7851 6.52581 9.14458 6.17418C9.50406 5.82254 9.99162 5.625 10.5 5.625C11.0084 5.625 11.4959 5.82254 11.8554 6.17418C12.2149 6.52581 12.4169 7.00272 12.4169 7.5C12.4169 7.99728 12.2149 8.47419 11.8554 8.82582C11.4959 9.17745 11.0084 9.375 10.5 9.375C9.99162 9.375 9.50406 9.17745 9.14458 8.82582C8.7851 8.47419 8.58315 7.99728 8.58315 7.5ZM10.5 3.75C9.48324 3.75 8.50812 4.14509 7.78916 4.84835C7.07021 5.55161 6.6663 6.50544 6.6663 7.5C6.6663 8.49456 7.07021 9.44839 7.78916 10.1517C8.50812 10.8549 9.48324 11.25 10.5 11.25C11.5168 11.25 12.4919 10.8549 13.2108 10.1517C13.9298 9.44839 14.3337 8.49456 14.3337 7.5C14.3337 6.50544 13.9298 5.55161 13.2108 4.84835C12.4919 4.14509 11.5168 3.75 10.5 3.75Z" fill="#323232"/></svg>
												)}
											</div>
										</div>
									</div>
									<div className="form-el form-reg__el">
										<div className="form-el__wrap">
											<input name="password" placeholder={t('inpPass2')} type={inpPassHide?'password':'text'} className="form-el__inp inp-def" required />
											<svg className="form-el__icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.8 5.59933C4.80021 4.44233 5.15874 3.3138 5.8263 2.36885C6.49387 1.4239 7.4377 0.708909 8.52806 0.322156C9.61843 -0.0645967 10.8018 -0.104128 11.9156 0.208996C13.0293 0.522119 14.0187 1.17253 14.7479 2.07082C15.477 2.96912 15.91 4.07121 15.9874 5.22561C16.0649 6.38001 15.7829 7.53005 15.1802 8.51767C14.5776 9.50529 13.6838 10.282 12.6219 10.7411C11.5599 11.2001 10.3818 11.319 9.2496 11.0813L8 12.331C7.70001 12.6311 7.29311 12.7997 6.8688 12.7998H6.4C6.4 13.2242 6.23143 13.6312 5.93137 13.9312C5.63131 14.2313 5.22435 14.3999 4.8 14.3999C4.8 14.8243 4.63143 15.2313 4.33137 15.5313C4.03131 15.8314 3.62435 16 3.2 16H1.6C1.17565 16 0.768687 15.8314 0.468629 15.5313C0.168571 15.2313 0 14.8243 0 14.3999V12.331C9.06198e-05 11.9066 0.168721 11.4997 0.4688 11.1997L4.9184 6.7498C4.83948 6.3714 4.79981 5.98587 4.8 5.59933ZM10.4 3.19917C10.1878 3.19917 9.98434 3.28346 9.83431 3.4335C9.68428 3.58354 9.6 3.78704 9.6 3.99922C9.6 4.21141 9.68428 4.41491 9.83431 4.56495C9.98434 4.71498 10.1878 4.79928 10.4 4.79928C10.6122 4.79928 10.8157 4.88357 10.9657 5.03361C11.1157 5.18364 11.2 5.38714 11.2 5.59933C11.2 5.81151 11.2843 6.01501 11.4343 6.16505C11.5843 6.31509 11.7878 6.39938 12 6.39938C12.2122 6.39938 12.4157 6.31509 12.5657 6.16505C12.7157 6.01501 12.8 5.81151 12.8 5.59933C12.8 4.96277 12.5471 4.35228 12.0971 3.90216C11.647 3.45204 11.0365 3.19917 10.4 3.19917Z" fill="#9DA7B4"/></svg>
											<div className={`form-el__btn-pass ${!inpPassHide ? 'active' : ''}`} onClick={() => setInpPassHide(!inpPassHide)}>
												{inpPassHide && (
														<svg width="21" height="19" viewBox="0 0 21 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.55193 0.267004C2.37117 0.0937412 2.12907 -0.0021312 1.87778 3.59567e-05C1.62648 0.00220312 1.3861 0.102237 1.2084 0.278591C1.0307 0.454945 0.929904 0.69351 0.92772 0.942904C0.925537 1.1923 1.02214 1.43256 1.19672 1.61196L18.4483 18.733C18.6291 18.9063 18.8712 19.0021 19.1225 19C19.3738 18.9978 19.6142 18.8978 19.7919 18.7214C19.9696 18.5451 20.0704 18.3065 20.0725 18.0571C20.0747 17.8077 19.9781 17.5674 19.8035 17.388L17.141 14.7457C19.355 12.9803 20.5367 10.7641 20.8616 10.0973C20.9527 9.91134 21 9.70726 21 9.50048C21 9.29369 20.9527 9.08961 20.8616 8.90362C20.1333 7.44801 19.161 6.12578 17.9864 4.99336C16.3082 3.39064 13.8383 1.89065 10.5001 1.89065C8.53633 1.89065 6.8658 2.41094 5.47896 3.17187L2.55193 0.267004ZM8.55262 6.22227C9.28483 5.79331 10.14 5.61809 10.9835 5.72419C11.827 5.83029 12.6111 6.21168 13.2123 6.80836C13.8135 7.40505 14.1978 8.18316 14.3047 9.0203C14.4116 9.85744 14.2351 10.7061 13.8029 11.4328L15.7762 13.3912C17.5551 12.0311 18.6113 10.2752 19.0186 9.5C18.4011 8.33852 17.6039 7.28033 16.6561 6.364C15.2252 4.99622 13.2077 3.79299 10.5001 3.79299C9.25633 3.78681 8.02692 4.05722 6.90222 4.58436L8.55262 6.22227ZM12.3518 9.99271C12.439 9.67007 12.4391 9.33033 12.3521 9.00765C12.265 8.68497 12.0939 8.39073 11.8559 8.15452C11.6179 7.91832 11.3214 7.74847 10.9962 7.66208C10.6711 7.57568 10.3288 7.57577 10.0037 7.66234L12.3518 9.99271ZM3.45573 5.84846C3.55139 5.92965 3.63 6.02874 3.68707 6.14008C3.74414 6.25142 3.77855 6.37283 3.78834 6.49737C3.79813 6.62191 3.7831 6.74714 3.74412 6.86591C3.70514 6.98469 3.64297 7.09468 3.56115 7.18961C2.95047 7.89962 2.42076 8.67445 1.98167 9.5C2.59912 10.6615 3.39631 11.7197 4.34419 12.636C5.77511 14.0038 7.79259 15.207 10.5001 15.207C11.1135 15.207 11.6867 15.1461 12.2253 15.0358C12.4744 14.9853 12.7335 15.0352 12.9456 15.1743C13.1577 15.3134 13.3054 15.5305 13.3562 15.7777C13.4071 16.0249 13.3569 16.2821 13.2167 16.4926C13.0765 16.703 12.8578 16.8496 12.6087 16.9001C11.9464 17.0352 11.2429 17.1094 10.5001 17.1094C7.16195 17.1094 4.69209 15.6094 3.01485 14.0066C1.84001 12.8745 0.867434 11.5526 0.138626 10.0973C0.0473991 9.91088 0 9.70632 0 9.49905C0 9.29178 0.0473991 9.08721 0.138626 8.90076C0.371523 8.42518 1.00792 7.22671 2.10339 5.95404C2.18513 5.85904 2.28493 5.78094 2.39708 5.72422C2.50924 5.6675 2.63155 5.63326 2.75704 5.62345C2.88253 5.61365 3.00874 5.62847 3.12846 5.66708C3.24818 5.70569 3.36001 5.76732 3.45573 5.84846Z" fill="#9DA7B4"/></svg>
												)}
												{!inpPassHide && (
														<svg width="21" height="15" viewBox="0 0 21 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34403 10.5909C3.39617 9.68778 2.59897 8.64479 1.98152 7.5C2.59897 6.35521 3.39617 5.31222 4.34403 4.40906C5.77496 3.06094 7.79245 1.875 10.5 1.875C13.2076 1.875 15.225 3.06094 16.656 4.40906C17.6038 5.31222 18.401 6.35521 19.0185 7.5C18.401 8.6448 17.6038 9.68779 16.656 10.5909C15.225 11.9391 13.2076 13.125 10.5 13.125C7.79245 13.125 5.77496 11.9391 4.34403 10.5909ZM10.5 0C7.1618 0 4.69194 1.47844 3.0147 3.05813C1.83983 4.17394 0.867258 5.47684 0.138463 6.91125C0.0473463 7.09455 0 7.29571 0 7.49953C0 7.70335 0.0473463 7.90451 0.138463 8.08781C0.866876 9.52248 1.83913 10.8257 3.01374 11.9419C4.69194 13.5216 7.16276 15 10.5 15C13.8382 15 16.3081 13.5216 17.9853 11.9419C19.1602 10.8261 20.1328 9.52318 20.8615 8.08875C20.9527 7.90545 21 7.70429 21 7.50047C21 7.29665 20.9527 7.09549 20.8615 6.91219C20.1332 5.4775 19.1609 4.17427 17.9863 3.05813C16.3081 1.47844 13.8382 0 10.5 0ZM8.58315 7.5C8.58315 7.00272 8.7851 6.52581 9.14458 6.17418C9.50406 5.82254 9.99162 5.625 10.5 5.625C11.0084 5.625 11.4959 5.82254 11.8554 6.17418C12.2149 6.52581 12.4169 7.00272 12.4169 7.5C12.4169 7.99728 12.2149 8.47419 11.8554 8.82582C11.4959 9.17745 11.0084 9.375 10.5 9.375C9.99162 9.375 9.50406 9.17745 9.14458 8.82582C8.7851 8.47419 8.58315 7.99728 8.58315 7.5ZM10.5 3.75C9.48324 3.75 8.50812 4.14509 7.78916 4.84835C7.07021 5.55161 6.6663 6.50544 6.6663 7.5C6.6663 8.49456 7.07021 9.44839 7.78916 10.1517C8.50812 10.8549 9.48324 11.25 10.5 11.25C11.5168 11.25 12.4919 10.8549 13.2108 10.1517C13.9298 9.44839 14.3337 8.49456 14.3337 7.5C14.3337 6.50544 13.9298 5.55161 13.2108 4.84835C12.4919 4.14509 11.5168 3.75 10.5 3.75Z" fill="#323232"/></svg>
												)}
											</div>
										</div>
										{passwordError && (
											<div className="form-el__message"><svg width="9" height="9" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 0.9C3.54522 0.9 2.62955 1.27928 1.95442 1.95442C1.27928 2.62955 0.9 3.54522 0.9 4.5C0.9 5.45478 1.27928 6.37045 1.95442 7.04558C2.62955 7.72072 3.54522 8.1 4.5 8.1C5.45478 8.1 6.37045 7.72072 7.04558 7.04558C7.72072 6.37045 8.1 5.45478 8.1 4.5C8.1 3.54522 7.72072 2.62955 7.04558 1.95442C6.37045 1.27928 5.45478 0.9 4.5 0.9ZM0 4.5C0 2.01465 2.01465 0 4.5 0C6.98535 0 9 2.01465 9 4.5C9 6.98535 6.98535 9 4.5 9C2.01465 9 0 6.98535 0 4.5ZM4.5 2.25C4.61935 2.25 4.73381 2.29741 4.8182 2.3818C4.90259 2.46619 4.95 2.58065 4.95 2.7V4.95C4.95 5.06935 4.90259 5.18381 4.8182 5.2682C4.73381 5.35259 4.61935 5.4 4.5 5.4C4.38065 5.4 4.26619 5.35259 4.1818 5.2682C4.09741 5.18381 4.05 5.06935 4.05 4.95V2.7C4.05 2.58065 4.09741 2.46619 4.1818 2.3818C4.26619 2.29741 4.38065 2.25 4.5 2.25ZM4.5 5.85C4.38065 5.85 4.26619 5.89741 4.1818 5.9818C4.09741 6.06619 4.05 6.18065 4.05 6.3C4.05 6.41935 4.09741 6.53381 4.1818 6.6182C4.26619 6.70259 4.38065 6.75 4.5 6.75H4.5045C4.62385 6.75 4.73831 6.70259 4.8227 6.6182C4.90709 6.53381 4.9545 6.41935 4.9545 6.3C4.9545 6.18065 4.90709 6.06619 4.8227 5.9818C4.73831 5.89741 4.62385 5.85 4.5045 5.85H4.5Z" fill="#E40000"/></svg> {passwordError}</div>
										)}
									</div>
									<div className="form-reg__btns">
										<button className="form-reg__next btn-def-2" onClick={() => {
											// dispatch(sendPassword({email, code, password}))
											setStage(SUCCESS_STAGE)
                    }}><span>{t('next')}</span></button>
										<button onClick={() => navigate(LOGIN_PAGE)} className="form-reg__back btn-def"><span>{t('backText')}</span></button>
									</div>
								</div>
							</>:undefined}
							{ stage === SUCCESS_STAGE ? <>
                <div className="steps-stat sec-reg__stat">
                    <div className="steps-stat__el active">1</div>
                    <div className="steps-stat__el active">2</div>
                    <div className="steps-stat__el active">3</div>
                    <div className="steps-stat__el active"><svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.67905 12C5.57787 12 5.47668 11.952 5.42609 11.9041L0.113834 6.91708C-0.0379447 6.77323 -0.0379447 6.53347 0.113834 6.38961L2.08696 4.56743C2.13755 4.47153 2.23874 4.47153 2.33992 4.47153C2.44111 4.47153 2.4917 4.47153 2.59289 4.56743L5.62846 7.49251L13.4198 0.107892C13.5715 -0.035964 13.8245 -0.035964 13.9763 0.107892L15.8988 1.97802C16 2.02597 16 2.12188 16 2.21778C16 2.26573 16 2.36164 15.8988 2.45754L5.93202 11.9041C5.83083 11.952 5.78024 12 5.67905 12Z" fill="white"/></svg></div>
                </div>
								<div className="final-info">
									<div className="final-info__icon"><svg width="97" height="97" viewBox="0 0 97 97" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_8_519)"><path fill-rule="evenodd" clip-rule="evenodd" d="M48.5 97C21.7871 97 0 75.2129 0 48.5C0 21.7871 21.7871 0 48.5 0C75.2129 0 97 21.7871 97 48.5C97 75.2129 75.2129 97 48.5 97Z" fill="#88DCD6"/><path fill-rule="evenodd" clip-rule="evenodd" d="M48.5002 83.6056C29.176 83.6056 13.3945 67.8242 13.3945 48.5C13.3945 29.1757 29.176 13.3943 48.5002 13.3943C67.8244 13.3943 83.6059 29.1757 83.6059 48.5C83.6059 67.8242 67.9854 83.6056 48.5002 83.6056Z" fill="#009999"/><path fill-rule="evenodd" clip-rule="evenodd" d="M39.9654 68.6294C39.6433 68.6294 39.3212 68.4683 39.1602 68.3073L22.2515 51.5596C21.7684 51.0765 21.7684 50.2714 22.2515 49.7883L28.5319 43.6689C28.6929 43.3469 29.015 43.3469 29.337 43.3469C29.6591 43.3469 29.8201 43.3469 30.1422 43.6689L39.8043 53.4921L64.6037 28.6927C65.0868 28.2095 65.892 28.2095 66.3751 28.6927L72.4945 34.973C72.8165 35.1341 72.8165 35.4561 72.8165 35.7782C72.8165 35.9392 72.8165 36.2613 72.4945 36.5834L40.7705 68.3073C40.4485 68.4683 40.2874 68.6294 39.9654 68.6294Z" fill="white"/></g><defs><clipPath id="clip0_8_519"><rect width="97" height="97" fill="white"/></clipPath></defs></svg></div>
									<div className="final-info__title title-def">{t('regSuccess')}</div>
									<button onClick={() => navigate(LOGIN_PAGE)} className="final-info__btn btn-def"><span>{t('backText')}</span></button>
								</div>
							</>:undefined}
            </div>
        </div>
    </div>
}